-- 테이블 순서는 관계를 고려하여 한 번에 실행해도 에러가 발생하지 않게 정렬되었습니다.

-- MEMBER Table Create SQL
CREATE TABLE MEMBER
(
    ID          VARCHAR2(20)     NOT NULL, 
    PWD         VARCHAR2(30)     NOT NULL, 
    NAME        VARCHAR2(20)     NOT NULL, 
    PHONE       VARCHAR2(20)     NOT NULL, 
    EMAIL       VARCHAR2(30)     NOT NULL, 
    NICKNAME    VARCHAR2(30)     NOT NULL, 
    CONSTRAINT MEMBER_PK PRIMARY KEY (ID)
);


-- MEMBER Table Create SQL
CREATE TABLE ORD
(
    O_CODE    VARCHAR2(32)    NOT NULL, 
    ID        VARCHAR2(20)    NOT NULL, 
    A_ID      VARCHAR2(20)    NOT NULL, 
    O_DATE    DATE            NOT NULL, 
    CONSTRAINT ORD_PK PRIMARY KEY (O_CODE)
);



-- MEMBER Table Create SQL
CREATE TABLE PRODUCT
(
    P_CODE    VARCHAR2(32)    NOT NULL, 
    P_NAME    VARCHAR2(64)    NOT NULL, 
    PRICE     NUMBER          NOT NULL, 
    A_ID      VARCHAR2(20)    NOT NULL, 
    P_SIZE    VARCHAR2(20)    NOT NULL, 
    CONSTRAINT PRODUCT_PK PRIMARY KEY (P_CODE)
);


ALTER TABLE PRODUCT
    ADD CONSTRAINT FK_PRODUCT_A_ID_MEMBER_ID FOREIGN KEY (A_ID)
        REFERENCES MEMBER (ID)
;


-- MEMBER Table Create SQL
CREATE TABLE CATEGORIES
(
    C_ID    VARCHAR2(20)    NOT NULL, 
    CONSTRAINT CATEGORIES_PK PRIMARY KEY (C_ID)
);



-- MEMBER Table Create SQL
CREATE TABLE ADMIN
(
    AD_ID     VARCHAR2(64)    NOT NULL, 
    AD_PWD    VARCHAR2(30)    NOT NULL, 
    CONSTRAINT ADMIN_PK PRIMARY KEY (AD_ID)
);


-- MEMBER Table Create SQL
CREATE TABLE DELIVERY
(
    P_CODE       VARCHAR2(32)     NOT NULL, 
    D_ADDRESS    VARCHAR2(256)    NOT NULL, 
    D_POST       NUMBER           NOT NULL, 
    ID           VARCHAR2(20)     NOT NULL, 
    O_CODE       VARCHAR2(32)     NOT NULL
);



ALTER TABLE DELIVERY
    ADD CONSTRAINT FK_DELIVERY_O_CODE_ORD_O_COD FOREIGN KEY (O_CODE)
        REFERENCES ORD (O_CODE)
;

ALTER TABLE DELIVERY
    ADD CONSTRAINT FK_DELIVERY_ID_MEMBER_ID FOREIGN KEY (ID)
        REFERENCES MEMBER (ID)
;


-- MEMBER Table Create SQL
CREATE TABLE ADDRESS
(
    ID         VARCHAR2(20)     NOT NULL, 
    ADDRESS    VARCHAR2(256)    NOT NULL, 
    POST       NUMBER           NOT NULL
);


ALTER TABLE ADDRESS
    ADD CONSTRAINT FK_ADDRESS_ID_MEMBER_ID FOREIGN KEY (ID)
        REFERENCES MEMBER (ID)
;


-- MEMBER Table Create SQL
CREATE TABLE ARTIST
(
    ID          VARCHAR2(20)     NOT NULL, 
    NICKNAME    VARCHAR2(30)     NOT NULL, 
    A_DETAIL    VARCHAR2(256)    NOT NULL
);


ALTER TABLE ARTIST
    ADD CONSTRAINT FK_ARTIST_ID_MEMBER_ID FOREIGN KEY (ID)
        REFERENCES MEMBER (ID)
;


-- MEMBER Table Create SQL
CREATE TABLE WISHLIST
(
    P_CODE    VARCHAR2(32)    NOT NULL, 
    ID        VARCHAR2(20)    NOT NULL
);


ALTER TABLE WISHLIST
    ADD CONSTRAINT FK_WISHLIST_ID_MEMBER_ID FOREIGN KEY (ID)
        REFERENCES MEMBER (ID)
;


-- MEMBER Table Create SQL
CREATE TABLE STEP
(
    O_CODE    VARCHAR2(32)    NOT NULL, 
    STEP      VARCHAR2(32)    NOT NULL
);


ALTER TABLE STEP
    ADD CONSTRAINT FK_STEP_O_CODE_ORD_O_CODE FOREIGN KEY (O_CODE)
        REFERENCES ORD (O_CODE)
;


-- MEMBER Table Create SQL
CREATE TABLE FOLLOW
(
    ID      VARCHAR2(20)    NOT NULL, 
    A_ID    VARCHAR2(20)    NOT NULL
);


ALTER TABLE FOLLOW
    ADD CONSTRAINT FK_FOLLOW_ID_MEMBER_ID FOREIGN KEY (ID)
        REFERENCES MEMBER (ID)
;


-- MEMBER Table Create SQL
CREATE TABLE TAG
(
    P_CODE    VARCHAR2(32)    NOT NULL, 
    TAG       VARCHAR2(32)    NOT NULL
);


ALTER TABLE TAG
    ADD CONSTRAINT FK_TAG_P_CODE_PRODUCT_P_CODE FOREIGN KEY (P_CODE)
        REFERENCES PRODUCT (P_CODE)
;


-- MEMBER Table Create SQL
CREATE TABLE DETAIL
(
    P_CODE      VARCHAR2(32)     NOT NULL, 
    P_DETAIL    VARCHAR2(512)    NOT NULL
);


ALTER TABLE DETAIL
    ADD CONSTRAINT FK_DETAIL_P_CODE_PRODUCT_P_COD FOREIGN KEY (P_CODE)
        REFERENCES PRODUCT (P_CODE)
;


-- MEMBER Table Create SQL
CREATE TABLE S_ORD
(
    O_CODE    VARCHAR2(32)    NOT NULL, 
    P_CODE    VARCHAR2(32)    NOT NULL
);


ALTER TABLE S_ORD
    ADD CONSTRAINT FK_S_ORD_O_CODE_ORD_O_CODE FOREIGN KEY (O_CODE)
        REFERENCES ORD (O_CODE)
;


-- MEMBER Table Create SQL
CREATE TABLE S_CATEGORY
(
    P_CODE    VARCHAR2(32)    NOT NULL, 
    C_ID      VARCHAR2(20)    NOT NULL
);


ALTER TABLE S_CATEGORY
    ADD CONSTRAINT FK_S_CATEGORY_C_ID_CATEGORIES_ FOREIGN KEY (C_ID)
        REFERENCES CATEGORIES (C_ID)
;

ALTER TABLE S_CATEGORY
    ADD CONSTRAINT FK_S_CATEGORY_P_CODE_PRODUCT_P FOREIGN KEY (P_CODE)
        REFERENCES PRODUCT (P_CODE)
;

ALTER TABLE PRODUCT
ADD P_DATE DATE DEFAULT SYSDATE;
